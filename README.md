# Домашнее задание №5 "Архитектура проекта"
Предмет: Дизайн систем

Дедлайн: 19 декабря 23:59

## Задание

Возьмите любой кейс из [архитектурных ката](https://www.architecturalkatas.com/kata.html?kata=ConcertComparison.json) и спроектируйте его решение.

В решении необходимо предоставить:

- Пользовательские сценарии
- Общую схему взаимодействия сервисов.
- Для каждого сервиса опишите назначение сервиса и его зону ответственности.
  - Опишите контракты взаимодействия сервисов друг с другом.
  - Диаграмму контейнеров приложения на основе выбранной модели функциональной декомпозиции
- Декомпозицию слоя данных: какие данные в каких БД хранятся

## Проект "Сайт по продаже билетов"

[Ссылка на задание](https://www.architecturalkatas.com/kata.html?kata=ConcertComparison.json).

Сайт по продаже билетов с большим количеством запросов и высокой нагружкой нуждается в сервисе по продаже билетов. Пользователи: тысячи конкурирующих клиентов, достигает 10к запросов в моменты дропа билетов.

Требования:
- Обеспечить конкурентную работу сервиса
- Нельзя продать один билет дважды
- Покупатели должны видеть информацию об оставшихся местах

## Решение
### Пользовательские сценарии

![usecases](img/usecases.png)
Здесь будет таблица со всей хуйней


### Общая схема взаимодействия сервисов

![scheme](img/scheme.png)


#### ClientService

Основной сервис управления действиями клиента, в него приходят обращения из мобильного приложения, с веб-сайта,
из внешних подключений. Сервис обрабатывает запросы клиента и формирует ответы пользователю, в нем завязана логика 
упрвлением действий пользователя и формированием запросов на покупку билета, проверка на доступность билетов.
Сервис обращается к `AccountManagerService`, `EventService`, `TIcketService` и `OrderService` через Kafka.

#### AccountManagerService

Сервис отвечает за управление аккаунтами пользователей приложения, хранения основной информации о клиентах, 
параметров входа, связь клиентов с их заказами.

#### EventService

Сервиc отвечает за взаимодействия с мероприятиями, получение информации о событиях, о доступности мест. Сервис 
обращается только к БД.

#### TicketService

Сервис управления билетами клиентов, в нем создаются, удаляются билеты, идет общение с хранилищем S3. Сервис обращается
только к S3 и к БД.

#### OrderService 

Самое тяжелое место приложения, в нем происходит управление заказами клиентов, в частности, создание. Поскольку нагрузка
на сервис высокая, запросы к нему от клиента приходят через Kafka. Сервис обращается к внешней платежной системе 
`PaymentService`, `EventService`, `DeliveryService`, `TicketService` и БД.

#### PaymentService

Внешний сервис оплаты билетов, интеграция с платежной системой.

#### DeliveryService

Сервис, осуществляющий взаимодействие с клиентом посредством указанных им контактов: адрес почты, номер телефона.

### Сценарии взаимодействия сервисов

#### UC1. Регистрация клиента

![create_user_seq](img/create_user_seq.png)

#### UC2. Вход в личный кабинет

![user_login_seq](img/user_login_seq.png)

#### UC5. Просмотр личного кабинета и заказов

![get_ticket_seq](img/get_ticket_seq.png)

#### UC5. Поиск мероприятий и покупка билета

![make_order_seq](img/make_order_seq.png)

### Базы данных

#### AccountManagerDB

#### EventDB

#### TicketDB

#### OrderDB
